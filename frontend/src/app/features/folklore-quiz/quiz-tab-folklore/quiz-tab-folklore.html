@if (folkloreQuizManager.activeQuestions() != undefined)
{
  <p-toast life="2000" class="w-8" />

  <p-stepper [value]="1" class="basis-[50rem]">
    <p-step-list>
      <p-step [value]="1">Q. 1</p-step>
      <p-step [value]="2">Q. 2</p-step>
      <p-step [value]="3">Q. 3</p-step>
      <p-step [value]="4">Q. 4</p-step>
    </p-step-list>
    <!-- ------------------------- -->
    <!--          PANEL 1          -->
    <!-- ------------------------- -->
    <p-step-panels>
      <p-step-panel [value]="1">
        <ng-template #content let-activateCallback="activateCallback">
          <div class="flex flex-col h-48">
            <div class="flex flex-column gap-4 py-3">
              <!-- Prompt / Question -->
              <h2 class="text-2xl">Question 1 :</h2>
              <div class="flex flex-row gap-3">
                <p-image [src]="folkloreQuizManager.activeQuestions()[0].folkloreSubject.pictureUrl" alt="question.pictureUrl" width="100" [preview]="true" />
                <h3 class="text-2xl pt-3">{{ folkloreQuizManager.activeQuestions()[0].prompt }}</h3>
              </div>

              <!-- Options -->
              <form class="flex flex-column gap-2">
                <ng-container *ngFor="let answer of shuffledAnswers1">
                  <p-button
                    [label]="answer.label"
                    (onClick)="selectAnswer(answer.index, folkloreQuizManager.activeQuestions()[0])"
                    [raised]="true"
                    [severity]="getButtonSeverity(answer.index)" />
                </ng-container>
              </form>

              <!-- Validation -->
              <div class="flex justify-content-end">
                <p-button [label]="'Valider'" (click)="onSubmit()" [disabled]="!form.valid" [raised]="true" severity="info" />
              </div>
            </div>

          </div>
          <div class="flex pt-6 justify-end" (click)="resetSelection()">
            <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="activateCallback(2)" />
          </div>
          <div class="pb-8"></div>
        </ng-template>
      </p-step-panel>
      <!-- ------------------------- -->
      <!--          PANEL 2          -->
      <!-- ------------------------- -->
      <p-step-panel [value]="2">
        <ng-template #content let-activateCallback="activateCallback">
          <div class="flex flex-col h-48">
            <div class="flex flex-column gap-4 py-3">
              <!-- Prompt / Question -->
              <h2 class="text-2xl">Question 2 :</h2>
              <div class="flex flex-row gap-3">
                <p-image [src]="folkloreQuizManager.activeQuestions()[1].folkloreSubject.pictureUrl" alt="question.pictureUrl" width="100" [preview]="true" />
                <h3 class="text-2xl pt-3">{{ folkloreQuizManager.activeQuestions()[1].prompt }}</h3>
              </div>

              <!-- Options -->
              <form class="flex flex-column gap-2">
                <ng-container *ngFor="let answer of shuffledAnswers2">
                  <p-button
                    [label]="answer.label"
                    (onClick)="selectAnswer(answer.index, folkloreQuizManager.activeQuestions()[1])"
                    [raised]="true"
                    [severity]="getButtonSeverity(answer.index)" />
                </ng-container>
              </form>

              <!-- Validation -->
              <div class="flex justify-content-end">
                <p-button [label]="'Valider'" (click)="onSubmit()" [disabled]="!form.valid" [raised]="true" severity="info" />
              </div>
            </div>

          </div>
          <div class="flex pt-6 justify-between" (click)="resetSelection()">
            <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" (onClick)="activateCallback(1)" />
            <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="activateCallback(3)" />
          </div>
          <div class="pb-8"></div>
        </ng-template>
      </p-step-panel>
      <!-- ------------------------- -->
      <!--          PANEL 3          -->
      <!-- ------------------------- -->
      <p-step-panel [value]="3">
        <ng-template #content let-activateCallback="activateCallback">
          <div class="flex flex-col h-48">
            <div class="flex flex-column gap-4 py-3">
              <!-- Prompt / Question -->
              <h2 class="text-2xl">Question 3 :</h2>
              <div class="flex flex-row gap-3">
                <p-image [src]="folkloreQuizManager.activeQuestions()[2].folkloreSubject.pictureUrl" alt="question.pictureUrl" width="100" [preview]="true" />
                <h3 class="text-2xl pt-3">{{ folkloreQuizManager.activeQuestions()[2].prompt }}</h3>
              </div>

              <!-- Options -->
              <form class="flex flex-column gap-2">
                <ng-container *ngFor="let answer of shuffledAnswers3">
                  <p-button
                    [label]="answer.label"
                    (onClick)="selectAnswer(answer.index, folkloreQuizManager.activeQuestions()[2])"
                    [raised]="true"
                    [severity]="getButtonSeverity(answer.index)" />
                </ng-container>
              </form>

              <!-- Validation -->
              <div class="flex justify-content-end">
                <p-button [label]="'Valider'" (click)="onSubmit()" [disabled]="!form.valid" [raised]="true" severity="info" />
              </div>
            </div>

          </div>
          <div class="flex pt-6 justify-between" (click)="resetSelection()">
            <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" (onClick)="activateCallback(2)" />
            <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="activateCallback(4)" />
          </div>
          <div class="pb-8"></div>

        </ng-template>
      </p-step-panel>

      <!-- ------------------------- -->
      <!--          PANEL 4          -->
      <!-- ------------------------- -->
      <p-step-panel [value]="4">
        <ng-template #content let-activateCallback="activateCallback">
          <div class="flex flex-col h-48">
            <div class="flex flex-column gap-4 py-3">
              <!-- Prompt / Question -->
              <h2 class="text-2xl">Question 4 :</h2>
              <div class="flex flex-row gap-3">
                <p-image [src]="folkloreQuizManager.activeQuestions()[3].folkloreSubject.pictureUrl" alt="question.pictureUrl" width="100" [preview]="true" />
                <h3 class="text-2xl pt-3">{{ folkloreQuizManager.activeQuestions()[3].prompt }}</h3>
              </div>

              <!-- Options -->
              <form class="flex flex-column gap-2">
                <ng-container *ngFor="let answer of shuffledAnswers4">
                  <p-button
                    [label]="answer.label"
                    (onClick)="selectAnswer(answer.index, folkloreQuizManager.activeQuestions()[3])"
                    [raised]="true"
                    [severity]="getButtonSeverity(answer.index)" />
                </ng-container>
              </form>

              <!-- Validation -->
              <div class="flex justify-content-end">
                <p-button [label]="'Valider'" (click)="onSubmit()" [disabled]="!form.valid" [raised]="true" severity="info" />
              </div>
            </div>

          </div>
          <div class="flex pt-6 justify-start" (click)="resetSelection()">
            <p-button label="Back" icon="pi pi-arrow-left" iconPos="left" (onClick)="activateCallback(3)" />
          </div>
          <div class="pb-8"></div>

        </ng-template>
      </p-step-panel>
    </p-step-panels>
  </p-stepper>
  }
@else
{
    <p>Pas de question de folklore actives</p>
}
